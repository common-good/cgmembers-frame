<?php

/*
 * @file
 * rCredits Help Messages
 * This file contains a single function that returns a help message.
 */
 
namespace CG\Web;
use CG as r;
use CG\Util as u;
use CG\Web as w;

/**
 * Return the appropriate raw help text.
 * @param string $i: identifier for the appropriate help text.
 * @param string $tag: (optional) item to highlight)
 * @param string $args: other URL arguments
 * @param assoc $args:  (RETURNED) arbitrary data
 */
function rawHelp($i, $tag = '', &$args = '') {
  global $rUrl;
  
  extract(just('gifts years', $args));

  if ($mya = w\eLinkAcct($zot, $args, 'any')) {
    $ctty = $mya->community ?: 0;
    $company = $mya->co;
    $username = $mya->name;
    $cttyName = $mya->cttyA->fullName;
  } else $ctty = $company = $username = $cttyName = '';
  
  $site = str_replace('https://', '', BASE_URL);
  $_aPage = atag("/member/$username", w\away());
  $_aInfo = atag('/account/company');
  $regEmail = r\regionField('email');
 
  $companyAccount = $company ? '' : t(<<< X
  <p>For companies, upload a picture to represent your business. This picture will appear on your automatic %PROJECT webpage: <%aPage>%site/member/%username</a> &mdash; so choose wisely. See also the <%aInfo>Company Info</a> form.</p>
X
  , compact('_aPage', '_aInfo', 'username', 'site'));
  
  $_cashflow = t(<<< X
    <p>As a %PROJECT Community you and other members decide together when to spend, grant, lend, and/or invest some of the US Dollars members have put into their %PROJECT accounts, which are held in a Community Fund Dollar Pool in a bank.</p>
    
    <p>Your %PROJECT Community must take care to keep enough money in the Community Dollar Pool to cover requests by members to move funds to their bank account, trading some of their %RCREDITS for US Dollars.</p>
    
    <p>If you and your community misjudge and members transfer large amounts, all at once, from their %PROJECT account to their bank account and/or transfer much less than usual from their bank account to their %PROJECT account, the amount in the communityâ€™s Dollar Pool becomes less and less. Then at some point when a member requests a transfer to their bank account, there might not be enough Dollars left to complete that request until more US Dollars come in. We call this a cash crunch.</p>

    <p>Backing Promises from members assure that additional Dollars are always available within 7 days for participants to transfer to their bank account, allowing for continued smooth operations even in the unlikely event of a cash crunch.</p>
X
  );
  
  //Help is also available for the <a href="%BASE_URL/help/sms">Text Messaging Interface</a>.
  $back = '<p>' . 
  w\backButton() . '</p>';
  
  if ($i == 'general') return t(<<< X
    <p>Here's what to click on the menu.</p>
    <ul>
      <li><b>Dashboard</b>. An overview of your account and links to the most common pages.</li>
      <li><b>Invest</b>. For participation in the %PROJECT Investment Club.</li>
      <li><b>History</b>. A picture of your finances.</li>
      <li><b>Community</b>. Options for collaboration, donations, and community democracy.</li>
      <li><b>Company</b>. Tools, reports, and settings for your company account.</li>
      <li><b>Settings</b>. Configuration and preferences for your account.</li>
      <li><b>Photo</b>: Click your photo in the upper right corner, <a class="loud">to select an account</a>, if you have more than one.</li>
    </ul>
    <p>Can't find what you need? <%aEmail>email us</a> or send us a secure message below. Comments and suggestions are especially welcome!</p>
X
  , '_aEmail', u\emailTag($regEmail, t('help with my %PROJECT account')));

  if ($i == 'other') return t(<<< X
    <h2>Need Help Signing In?</h2>
    <p>If your username and password aren't working, no worries. Just click "<%aForgot>Forgot it</a>" here or on the sign-in page, to get an email for choosing a new password.</p>
    <h2>About %PROJECT&reg;</h2>
    <p>%PROJECT is a payment system for the common good. It is also a %PROJECT Economics Toolkit, to help you and people everywhere create a democratic, community-centered economic system that puts people and planet first -- one community at a time.</p>
    <p>We take transparency seriously &mdash; for true democratic control of our local economy we have to be able to see what's going on. Even if you are not a member, you can see what's happening in the %PROJECT economy graphically on the <%aCtty>Community page</a>.</p>
    <p>The <%aAgree>%PROJECT Agreement</a> is at the heart of the %PROJECT system. It is the promise we make together to accept %RCREDITS that gives them value.</p>
    <p>Participation in %PROJECT is by invitation. Ask a friend to invite you or <%aPromo>request an invitation here</a> and we will let you know when the %PROJECT Economy comes to your community.</p>
    <p>%PROJECT is a 501(c)(3) Massachusetts-based nonprofit.</p>
X
  , 'username _aForgot _aCtty _aAgree _aPromo', $username, atag("/account/password/%username"), atag('/community'), atag('/agreement'), atag(PROMO_URL));

  if ($i == 'sms') return t('The Text Message Interface is intended to be easy enough that you can just muddle your way through the first time. Give it a shot. You can even <i>sign up</i> with Text Messaging. Send your texts to +1 413.285.2867 OR use the <%aSMS>Test SMS form</a> to simulate sending a text.', '_aSMS', atag('/sms'));

  if ($i == 'dashboard') return t(<<< X
    <p>This page shows an overview of your %PROJECT Account.</p>
    <p><b>Account ID</b> has two parts. The part before the period is a 3-character identifier for your region (%regName). The part after the period uniquely identifies your account, within your region. If you have several accounts, this part will be different for each one.</p>
  <p><b>Balance</b> is the amount in your %PROJECT Account.</p>
  <p><b>Credit line</b> is how far negative your account balance is allowed to go. Your credit limit increases a little at a time, based on your how much you receive and spend each month.</p>
X
  , 'regName', $cttyName);

  if ($i == 'txs') return t(<<< X
    <p>Select the period you want to see transactions for. Both the Summary and Transactions sections will reflect just the transactions in that period. However, the "Pending" line will reflect all your not-yet-accepted invoices and offers EVER. The Ending balance in the Summary is always your current balance.</p>
    <p>If the status is "pending", either you or the other party will need to click "OK" to complete the deal. click the "X" to reject an invoice, dispute a charge, reject an offer, or cancel or undo something you did. click the pencil to edit the description. The description is just for you &mdash; the other party will not see it.</p>
X
  );

  if ($i == 'pay' and $whys = ray(R_WHYS)) return t(<<< X
    <p><b>Whom:</b> Type all or part of the full name of the account you want to pay. You can leave out the punctuation, spaces, and capitals. Or you can type their phone number or email address or their account ID.</p>
    <p><b>Amount:</b> The amount of the transaction, measured in dollars, to be paid in %RCREDITS.</p>
    <p><b>Purpose:</b> If this is a purely financial transaction, click "%forMoney" or "%forNongoods". Otherwise, a description is required (for purchases and sales of real goods and services). Donations to nonprofit organizations count as purchases of real services &mdash; services to society. For loans, cash exchanges, and other money deals, you can leave the purpose blank &mdash; your statements will call the purpose "cash".</p>
X
  , 'forMoney forNongoods', $whys[FOR_USD], $whys[FOR_NONGOODS]);

  if ($i == 'directory') return t(<<< X
    <p>This is where you can find out who takes %RCREDITS for what you want. click a business name to see its %PROJECT webpage.</p>
    <p>You can limit the results to a specific industry or a specific business by typing all or part of the industry or business name. Currently, if you limit the results geographically, there won't be any results unless you choose the United States "01" postal code region.</p>
X
  );

  if ($i == 'account/basic') return t(<<< X
    <p><b>Current password:</b> To change your email address or password, you must supply your current password, as a security precaution.</p>
X
  );

  if ($i == 'account/cells') return t(<<< X
    <p>Add one or more cell phones to your account so you can use Text Messaging to buy and sell things with %RCREDITS. The form will send a secret word to your phone, which you can then enter here to confirm the connection.</p>
X
  );

  if ($i == 'account/relations') return t(<<< X
    <p>Relations let you connect individual %PROJECT participants to your account &mdash; as owners, employees, suppliers, or others, with limited or full access to the account. This is useful for authorizing sales clerks or setting up joint accounts. Or you might give your accountant "read" permission. Company accounts are managed only by an individual agent.</p>
    <p>Yellow highlights show settings that need to be confirmed &mdash; either by you or by the other party.</p>
    <p>To change settings in a Yes/No column, click + or -. To remove someone from the list, make them all "No"s, and no permissions (if they are already that way, change something and change it back). Be sure to "Save Changes".</p>
    <p>You can allow another account to "draw" from this one to avoid overdrafts (a 25 cent fee may apply).</p>
X
    );
    
  if ($i == 'account/contact') return t(<<< X
    <p><b>Full name</b> should be your full legal name. If you change the name on the account, your account will be disabled until you supply new proof of identity. For companies, your %PROJECT website address will also change.</p>
    <p><b>Postal code:</b> Your postal code determines what %PROJECT Community you are in.</p>
    <p><b>All other settings on this page</b> are private for individual accounts, public for company accounts.</p>
X
  );

  if ($i == 'account/photo') return t(<<< X
    <p>For an individual account you will need to upload a clear photo of your face, for identification. This is the photo a member business will see when you present your QR Code for payment. If you have trouble coming up with a photo in a format that works, have a youngster take picture of you with their cell phone or tablet. Ask them to email you the picture, save that attachment to your desktop, then upload it here. If you still have trouble, email a description of your predicament to us at <%a>%regEmail</a> and we will help.</p>
X
  , '_a regEmail', u\emailTag($regEmail, t('photo trouble'))) . $companyAccount;

  if ($i == 'account/company') return t(<<< X
    <p>All of the information from this form goes automatically on your <%aPage>%PROJECT webpage</a>, along with your company name and profile picture. Your email address will not be included unless you put it in the description explicitly. click the link, to see the results (after saving your changes).</p>
X
  , 'username _aPage', $username, atag("/member/$username"));

  if ($i == 'account/preferences') return t(<<< X
    <p>These settings start out as what most people prefer. Feel free to adjust them as you like. You can always come back and change them again later.</p>
    <ul>
      <li><b>Target.</b> You will want to keep enough in your account to cover the total amount you expect to spend at %PROJECT member businesses in a typical 3-day period. Add to this however much you want to hold as inflation-protected savings (the inflation adjustment is a monthly credit to your account).</li>
      <li><b>Email notices.</b> We suggest you begin with daily notices, until you feel comfortable with the system. You will receive a "daily" notice only when there is something new that you will want to know about (such as a credit to your account).</li>
    </ul>
X
    );

  if ($i == 'issuing-credits') return t(<<< X
    <p>%RCREDITS is a type of credit. Like any medium of exchange, it represents value. %RCREDITS makes it possible for us to trade goods and services with each other in our community, without having to trade something directly with whoever has what we want, and without having to give them something of precisely the same value ("barter"). The medium of exchange lets us give any amount of our goods or services to any participant in the economy, then receive the same value of goods or services from some other participant(s). If everyone both buys and sells, the credits move through the community in interconnected circles of exchange.</p>
    <p>From the start, %RCREDITS is issued as a one-to-one stand-in for US Dollars.</p>
    <p>Once %RCREDITS becomes well-established and popular in a community, we can also issue it together, with careful planning, as grants, zero-interest loans, equity investments, and incentives for doing the right thing. Together we can fund whatever enterprises and activities we decide would be best -- for our community, for communities elsewhere, and for the world.</p>
    <p>Issuing %RCREDITS is a community responsibility. This is the key to creating a %PROJECT Economy. We must issue as much credit as we need, to fund our priorities -- but no more than the value we as a community are capable of producing.</p>
X
  ) . $back;

  if ($i == 'why-no-one-time-option') return t(<<< X
    <p>We are very grateful for any donation you choose to make.</p>
    <p><b>99% member-supported.</b> So why don't we offer a one-time donation option during the sign-up process? We're in a bit of a Catch-22. We are funded almost entirely by individual donations. Foundations typically do not understand the importance of community-level <i>participatory</i> economic democracy. So our viability as an organization depends on a reliable stream of donations from individuals and local businesses. Almost all such donations come from our members.</p>
    <p><b>Success threshold.</b> We were fortunate to receive some substantial initial donations to carry us through several years. But we need to scale up to about 4,500 members in the next dozen months or so, to reach financial sustainability.</p>
    <p><b>The cost of asking.</b> Of course, if you make a one-time donation, we could call you in about a year, to ask for another donation. But times have changed. People are overwhelmed with funding appeals, emails, and phone calls. So fund appeals cost a huge amount of staff time. That feels wasteful to us and actually costs more than it brings in. So, alas, with regret, we force you to make the choice far in advance &mdash; during the short time we have your attention.</p>
    <p><b>Your options.</b> Please do not let this keep you from signing up! <span class="loud">If you choose a recurring donation, you can change it (or end it) at any time</span> &mdash; just sign in and click "Donate" at the bottom of any page. Or choose a zero donation now by selecting "Other" and typing a "0" in the box.</p>
    <p>As always, we welcome your comments and suggestions. If you can think of a better way to handle this, please let us know. And thank you for participating in %PROJECT!</p>
X
  ) . $back;
  
  if ($i == 'common-good-community') return t(<<< X
    <p>The purpose of the %PROJECT system is to create and fund community-centered participatory democracy. In a %PROJECT Community* you decide together how much %RCREDITS to issue (within safe limits) and what to fund with it.</p>
    
    <p>A %PROJECT Community is in "Good Standing" when it is issuing %RCREDITS responsibly, so they accurately represent the potential of its members to produce corresponding goods and services in the short term. A %PROJECT Community may lose its good standing if it runs a trade deficit with other %PROJECT Communities and fails to redeem it in a timely manner. %PROJECT staff and the other %PROJECT Communities will provide ongoing feedback, to prevent this from happening accidentally.</p>
    <hr class="narrow">
    <p><small>* There are no specific requirements for a group of members to become a sovereign %PROJECT Community. But <%aClearness>these Clearness Questions</a> will help you get ready for that responsibility.</small></p>
X
  , '_aClearness', atag('https://docs.google.com/document/d/1-lBTNHTxIPrTSrIK18ZdbcMeEPS5g5jFhST34VGkR8E')) . $back;
  
  if ($i == 'cashflow') return $_cashflow . $back;

//  <p>Like the Federal Reserve's backing for US Dollars held as bank deposits, backing for %RCREDITS helps prevent unfounded fears from causing a "<%aCrunch>run on the bank</a>". All members agree to back %RCREDITS so your %PROJECT Community can continue to run smoothly.</p>
  
  if ($i == 'backing-common-good-credits') return t(<<< X
    <h4>What is "backing"?</h4>

    <p>Backing [a %PROJECT Community] is a promise, made by supportive members and member organizations one year at a time, to buy additional %PROJECT credit in the event of a cash crunch or termination of the %PROJECT Community. These promises give you the security of knowing your %PROJECT credit is backed by Dollars held in the Dollar Pool and/or by plenty of credible promises, helping prevent the sort of panic that can lead to a cash crunch. Backing Promises are a key component of taking responsibility and control of our own local economy.</p>

    <p>The promise you make in the %PROJECT Agreement is also a sort of Backing Promise. When you pay someone more than is in your %PROJECT account balance, that extra %PROJECT credit is backed by your promise to bring your balance back up to zero or more within 30 days.</p>

    <!--p>What fraction of my %PROJECT credit is backed by Dollars in the Dollar Pool? Click the button below to see the figures for each %PROJECT Community.</p>

    <h4>Backing Percentages</h4-->

    <h4>What is a cash crunch?</h4>

    %cashflow

    <h4>What happens if the amount of backing goes down too far?</h4>

    <p>Whatever permanent expenditures your %PROJECT Community makes (such as grants, social dividends, etc.), beyond whatever donations it has received, thatâ€™s how much is not backed by Dollars in the Dollar Pool, so thatâ€™s how much needs to be backed by Backing Promises. </p>

    <p>If you make such permanent expenditures together, then if someday members of your %PROJECT Community reduce their backing to the point your %PROJECT credit is no longer adequately backed, the most likely result is that your %PROJECT System would evolve or roll over into some other system. But if your %PROJECT Community ends, without any replacement, hereâ€™s how that would go:</p>

    <p>The amount of backing can only go down at first by about 0.3% per day, because Backing Promises do not end all at the same time. It would take a whole year for the backing to go to zero, if every single participant decided not to renew their commitment. This pace would give you and your %PROJECT Community about seven and a half months to search for solutions before the system would need to be shut down.</p>

    <p>For example, suppose you and your %PROJECT Community follow the recommended policy and make no permanent expenditures beyond what would be 200% backed by members. And suppose you (collectively) choose to set 125% as the absolute minimum backing. In the event your collective backing commitment declines from 200% to a mere 125%, your Backing Promise becomes a charitable contribution. All your other %PROJECT credit would then be exchanged automatically for Dollars (for example by transferring it to your bank account). Any small balance left in the Dollar Pool (because of more than 100% backing) would then be returned to the backer(s) who gave the most. And the system would end. </p>

    <p>As long as most participants honor their Backing Promise, only the amount you choose for your Backing Promise is at risk.</p>
X
  , compact('_cashflow')) . $back;

  if ($i == 'backing-example') return t(<<< X
    <p>Suppose you promise $100 in backing. Then if there is a cash crunch within one year, you would immediately transfer $100 from your bank account to your Common Good account. Then in the unlikely event your Common Good Community ends instead of recovering, your $100 becomes a donation for all the wonderful things you funded together.</p>
    
    <p>The Common Good System flourishes only as much as we commit to it. How important is it to you? How much do you and your community stand to gain over the next 3 years, for example?</p>

    <p>For businesses, we can easily predict how much will be saved in credit card fees and the value of increased customer loyalty. But for individuals (and also for businesses), the value of %PROJECT investments and grants and greater local control of our destiny may be immeasurable.</p>
    <p><%aFunded>Here's some of what %PROJECT communities have been able to fund</a>, thanks to backing by members like you, with just a small part of their Community Fund.</p>
X
  , '_aFunded', atag('https://commongood.earth/communities/projects-and-investments', away())) . $back;
  
  if ($i == 'cashing-out') return t(<<< X
    <p>%RCREDITS has value and acts like money because we agree to accept it as payment for our good and services, so it moves from member to member to member as a token of exchange. When someone pays you in %RCREDITS, you can spend those funds &mdash; OR you can "cash it out" by transferring it to your bank account or exchanging it for US Dollars.</p>
    <p>You can cash out %RCREDITS that someone <i>pays</i> you, but any %RCREDITS you borrow, using your credit line, must continue to circulate within the %PROJECT system. You cannot cash it out &mdash; you can only spend it.</p>
    <p>You can help keep the %PROJECT system healthy by maintaining a positive balance most of the time.</p>  
X
, '_aReserve', atag('/credit-reserve')) . $back;

/*  if ($i == 'credit-reserve') return t(<<< X
    <p><b>Background.</b> It is crucial to the success of the %PROJECT system that most members maintain a positive account balance, so there is some %RCREDITS to circulate in the community. While the system is small, it is a bit frail in that regard, so we need to be extra careful to make sure there is no "<%aCrunch>cash flow crunch</a>" at least until we are ready to handle it as a strong, well-functioning democratic %PROJECT community.</p>

    <p><b>Your Credit Reserve.</b> So we divide your account into two pieces: your Balance and your Credit Reserve. Your incentive rewards go into the Credit Reserve, to encourage you to keep them in the system until you need them. This is like a traditional reserve credit line that kicks in whenever you would otherwise overdraw your checking account &mdash; except there are no fees here. You can spend those reserved funds any time, simply by letting your Balance go negative.</p>

    <p>For example, if you have $300 in your account and $100 of that is incentive rewards that you received (free), then your balance will show as $200, with a Credit Reserve of $100.</p>
    
    <p>Remember, we issue %RCREDITS together as a commmunity, so it is up to all of us to protect their value. Most people choose to keep a positive Balance, by setting a Target Balance on the Preferences settings page. Keeping most of the %RCREDITS we issue in the system helps the system stay healthy while it grows more and more robust.</p>
X
  , '_aCrunch', atag('/cashflow')) . $back; */
  
  if ($i == 'closing-down') return t(<<< X
     <p>%PROJECT staff and advisers have put great care into designing the %PROJECT System so that it will continue to flourish. In the unlikely event your %PROJECT Community or the %PROJECT System needs to close down, the %PROJECT Agreement gives us a way to end gracefully.</p>
     <p>As part of the %PROJECT Agreement, you promise to bring your balance up to zero if it is negative. You can either:</p>
     <ul><li>continue to accept %RCREDITS until you are square OR</li>
         <li>trade US Dollars to another member in exchange for %RCREDITS OR</li>
         <li>transfer US Dollars from your bank account.</li>
     </ul>
     <p>Complementarily, if the system ends and you have a positive balance, you can:</p>
     <ul><li>continue to make purchases with your credit for a limited time OR</li>
         <li>pay it to another member in exchange for cash OR</li>
         <li>transfer it to your bank account.</li>
     </ul>
     <p>We all make this agreement so if the system closes down, everyone is protected.</p>
     <p>However, if you and your %PROJECT Community have made mistakes in handling the Community's Dollar Pool and you need to close down when there are no longer enough Dollars in the Pool to redeem the %RCREDITS in circulation, the value of everyone's %RCREDITS will be proportionately diminished, as you are settlings the accounts and closing down.</p>
X
  ) . $back;

/*  if ($i == 'ready') return t(<<< X
     <p>There is no magic formula (yet) for deciding when a %PROJECT Community is ready to allow cashing out incentive rewards. The important question is: who gets to decide such things?</p>
     <p>The %PROJECT system was invented for a single, critically important purpose: to create an opportunity for the community to take responsibility for its own economy. In a <%aCGC>%PROJECT Community</a> you decide, along with your friends and neighbors, how many %RCREDITS to issue as incentive rewards, and how many as grants, loans, and investments. You decide what to incentivize:</p>
     <ul>
       <li>buying local?</li>
       <li>eating organic food?</li>
       <li>using renewable energy sources?</li>
       <li>creating works of art?</li>
     </ul>
     <p>Being able to discuss and decide together what to incentivize and what to fund means we decide together what to make happen in our world. The future is ours. Together we can provide a decent life for everyone in our community, offer a hand to people elsewhere, and do our part to rescue ourselves from the brink of climate-change disaster.</p>
     <p>Having enough throughput to be able to issue incentive rewards is a small step along that path. Nobody knows yet when we will have a fully-functioning %PROJECT Community, capable of making that judgment. One of our community organizers predicts it will be when there are about 3,000 %PROJECT members. Time will tell.</p>
     <p>In the meantime, you are encouraged to maintain a positive account balance, treating your incentive rewards (if any) as a <%aReserve>Credit Reserve</a>, so those %RCREDITS can keep circulating among the participants as much as possible, while we grow.</p>
X
  , '_aCGC _aReserve', atag('/common-good-community'), atag('/credit-reserve')) . $back; */
  
  if ($i == 'ethics') return t(<<< X
    <p>A %PROJECT Community relies on its members to show a high level of ethical behavior, as the basis for creating a culture of trust and possibility. Of course it is always possible for someone to "game" the system and we will continue to develop software that brings such misbehavior to the attention of the community.</p>
    <p>Sometimes what looks like unethical behavior is in reality a desperate bid to escape from poverty. It is our responsibility as a community to think well about what our members need and want, and use the funding power of %PROJECT accordingly, so that such desperation is never necessary.</p>
X
  ) . $back;

  if ($i == 'dispute-resolution-process') return t(<<< X
    <p>Disputes between %PROJECT members will be resolved as follows:</p>
      <ol>
        <li>The members work together cooperatively in good faith to attempt to resolve the matter themselves, amicably.</li>
        <li>If, after 30 days, the members have been unable to agree on a resolution, at the request of either member the members attempt to resolve the matter creatively with the help of a mediator.</li>
        <li>Failing such resolution, at the initiative of either member, the members submit the matter to binding arbitration, as follows:
          <ol class="abc">
            <li>Either member will initiate the dispute resolution process by sending a registered letter to the other at their address of record in which they appoint a representative and include the representative's full contact information. The representative should be familiar with %PROJECT and agree to put in the time and good will necessary to resolve the dispute.</li>
            <li>Within 10 days of the postmark of the registered letter, the other Party will submit a registered letter naming their representative, again with full contact information, and including best times for a meeting.</li>
            <li>The representative of the initiating Party will contact the other representative and set up a meeting. If there are any costs associated with setting up the meeting between representatives, they will be born by the representatives with the expectation that they will be reimbursed by their representees.</li>
            <li>The representatives will agree on and appoint an arbitrator who agrees to spend the time and energy to resolve the dispute. Any costs incurred by the arbitrator will be borne equally by each Party.</li>
            <li>The arbitrator may request any documentation or witnesses deemed necessary to arrive at a resolution, and both parties agree to comply promptly.  The decision of the arbitrator is binding on both parties.</li>
            <li>The dispute resolution will be written up by the arbitrator and signed by both representatives.</li>
            <li>The following timetables will be adhered to as well as possible: The representatives have 10 days to agree on an arbitrator, and the arbitrator will have 10 days to come up with a resolution.  All parties agree to complete the dispute resolution process within 30 days.</li>
          </ol>
        </li>
      </ol>
X
  ) . $back;

  if ($i == 'participate') return t(<<< X
  <p>%PROJECT staff and the %PROJECT system will give you regular feedback on how your actions impact your finances and the well being of the community. For this feedback to be effective, you have to pay attention to it.</p>

  <p>The %PROJECT system needs feedback too! Please make suggestions when you see something that could be improved.</p>
  
  <p>Similarly, participatory economic democracy works only if you participate in your community's <%aProcess>decision process</a> to set funding priorities and make <%aOther>other decisions</a> from time to time, as needed.</p>
X
  , '_aProcess _aOther', atag('/decision-principles'), atag('/other-decisions')) . $back;

  if ($i == 'decision-principles') return t(<<< X
    <p>Each %PROJECT Community must decide for itself how to manage its decision making. %PROJECT staff are developing recommendations for best practices to value and encourage active participation by all members.</p>
X
  ) . $back;

  if ($i == 'other-decisions') return t(<<< X
    <p>From time to time, members will need to make a variety of non-financial decisions. A governing board may need to be elected. Policies and procedures occasionally need to be created or revised. Other issues may arise.</p>
X
  ) . $back;

  if ($i == 'common-good-community-requirements') return t(<<< X
    <p>Requirements for certification as a %PROJECT Community are not yet finalized. They may include such things as qualified leadership, minimum size, experience using the %PROJECT system, diversity of participants, and successful completion of a training program.</p>
X
  ) . $back;

  if ($i == 'agreement') return t(<<< X
    <a name="Member"></a>
    <a name="Member-Organization"></a>
    <a name="CGC"></a>
    <p>The %PROJECT Agreement is at the heart of the the %PROJECT system. It is our agreement to accept %PROJECT payments from each other that assures the value of %RCREDITS.</p>

    <p>A <b>Member</b> is any individual person who has signed this Agreement and has an active %PROJECT account.</p>

    <p>A <b>Member Organization</b> is any group, organization, or business that has signed this Agreement and has an active %PROJECT account.</p>

    <a name="Dollar-Pool"></a>
    <p>A <b>%PROJECT Community</b> is a group of Members and Member Organizations in a particular geographic region, defined (by the Members there) by a set of zip codes. The purpose of the %PROJECT system is to create and fund community-centered participatory democracy. In a %PROJECT Community you decide together how much %PROJECT credit to issue (within safe limits) and what to fund with it.</p>
    
    <p>There are no specific requirements for a group of members to become a sovereign %PROJECT Community. But <%aClearness>these Clearness Questions</a> will help you get ready for that responsibility.</p>

    <a name="Backing"></a>
    <p><b>Dollar Pool.</b> A bank account, owned by your %PROJECT Community. When you buy %PROJECT credit by transferring funds from your bank account to your %PROJECT account, your Dollars go into the Dollar Pool and the system gives you that amount of %PROJECT credit. You can then use your credit to buy something from a participating business by presenting your member QR Code. You can also pay someone online by clicking a "Pay With %PROJECT" button on a website. Or sign in at CommonGood.earth and click "Pay" on the menu. Meanwhile, just as a bank can invest the money in your checking account, you and your %PROJECT Community can use the money in the Dollar Pool to invest in worthwhile projects for the community and the common good.</p>

    <p><b>Backed.</b> Backing [a %PROJECT Community] is a promise, made by supportive members and member organizations one year at a time, to buy additional %PROJECT credit in the event of a cash crunch or termination of the %PROJECT Community. These promises give you the security of knowing your %PROJECT credit is backed by Dollars held in the Dollar Pool and/or by promises, helping prevent the sort of panic that can lead to a cash crunch. Backing Promises are a key component of taking responsibility and control of our own local economy.</p>

    <a name="Without-Limit"></a>
    <p>The promise you make in the %PROJECT Agreement is also a sort of Backing Promise. When you pay someone more than is in your %PROJECT account balance, that extra %PROJECT credit is backed by your promise to bring your balance back up to zero or more within 30 days.</p>

    <p><b>Without limit or surcharge.</b> As part of the %PROJECT Agreement, you promise to accept %PROJECT payments "without limit or surcharge".</p>

    <a name="Disputes"></a>
    <p><i>"Without limit"</i> means you will not tell a customer they have to use cash, credit card, or check to pay part of what they owe you. </p>

    <a name="Participation"></a>
    <p><i>"Without surcharge"</i> means you will charge the same amount as for other payment methods, unless you choose to give a discount for %PROJECT payments.</p>

    <p><b>Disputes.</b> We expect Members will generally resolve disputes amicably, but in the event a more formal resolution is needed, you agree to follow <%aDisputes>this process</a>.</p>
    
    <p>You will have the <b>opportunity to participate</b> in any decision to change the %PROJECT Agreement. This means you will receive an email invitation to attend discussions of any proposed change. And you will have an equal vote with all other Members on any such proposal that comes to a vote. You and other Members have a responsibility to all Members of your %PROJECT Community to encourage participation, to value the wisdom of each individual, and to be as inclusive as possible in all stages of the democratic process.</p>
    
X
  , '_aClearness _aDisputes', atag('https://docs.google.com/document/d/1-lBTNHTxIPrTSrIK18ZdbcMeEPS5g5jFhST34VGkR8E'), atag('/help/dispute-resolution-process')) . $back;

  if ($i == 'donate') return t(<<< X
    <p>Your donation helps fund administration and promotion of the %PROJECT system during the pilot phase. It is also a formal "sealing" of your signature on the %PROJECT Agreement.</p>
X
  );

  if ($i == 'account/proxies') return t(<<< X
    <p>During the pilot phase, it may be hard to choose two proxies from among the other members, unless you invite them to join first. You can change your selections at any time, so no worries.</p>
X
  );

  if ($i == 'invite') return t(<<< X
    <p>The %PROJECT system is designed to be community-centered, so our relationships with friends and neighbors in our own geographical community is important. We can work better together for the well being of everyone in our community and our region, if we know we can trust one another.</p>
    <p>Invite as many people as you like, but only people you trust.</p>
X
  );

  if ($i == 'transactions') return t(<<< X
    Hover over any option or column header for an explanation of what it means. Select some options, and the period or specific date range that interests you, then click either "Show" or "Download". The downloaded spreadsheet (in CSV format) has more complete information, including column totals.
X
  );
  if ($i == 'proxies') return t('proxy help');

  if ($i == 'demand' or $i == 'bank-transfers') return w\chartFrame('banking') . t(<<< X
    <p>This chart show the amount of Dollars flowing into and out of the Dollar Pool &mdash; either through transfers <b class="out">to</b> or <b class="in">from</b> a participant's bank account OR through trade with another community. <b class="export">Exports</b> bring Dollars in from another %PROJECT Community. <b class="import">Imports</b> send Dollars out to another %PROJECT community.</p>
    <p>The "demand" for %RCREDITS is the net amount of US Dollars people want to trade for %RCREDITS. As long as people have plenty of places to spend within the %PROJECT system, they will generally keep moving money in. So the demand gives us a pretty reliable measure of the system's soundness.</p>
    <p>We can keep issuing %RCREDITS (in exchange for Dollars or as negative account balances) as long as there is a net inflow of US Dollars (more <b class="in">green</b> than <b class="out">orange</b> on the chart &mdash; an increasing demand). If members need to make more purchases outside the %PROJECT network and are taking more US Dollars <b class="out">out</b> of the system than they are putting <b class="in">in</b> (a decreasing demand), then we must temporarily slow down <i>issuing</i> %RCREDITS. So when the community's demand is negative three months in a row, the system automatically alerts the %PROJECT Community's administrators, who can put a temporary ban on spending below a zero balance.</p>
    <p>Transfers from a %PROJECT Account to a bank account often reflect an incomplete <%aCircles>economic circle</a>. That is, the individual or company moving %RCREDITS to a bank account does not yet have enough places to spend them. Generally, this means they are spending them outside the community (and outside the %PROJECT system). This is an opportunity for import-replacement &mdash; starting new local businesses (or expanding existing businesses) to supply goods or services not currently produced in our region.</p>
    <p>How low our total monthly volume of outward transfers is, is a measure of how well we are doing as a community in our progress toward a sustainable local economy.</p>
    <p>As an individual, you can help by finding ways to spend within the %PROJECT system, instead of transferring your funds to a bank account. For all the money that circulates within the system, we can use %RCREDITS, freeing up that many US Dollars to use for something else. So, in effect, when you can keep money in the system, we are all that much richer.</p>
X
  , '_aCircles', atag('/help/economic-circles')) . $back;

  if ($i == 'growth') {
    $_helpus = $mya ? t('You can help! Invite your friends and all the local businesses where you want to spend your %RCREDITS. Sit with your friends while they sign up &mdash; it takes only half an hour, but without a nudge most people spend several weeks putting it off.', '_aInvite', atag('/community/invite')) : t('<%aSignup>Join us</a>!', '_aSignup', atag('/signup'));
    
    return w\chartFrame('growth') . t(<<< X
      <p>The real power and purpose of the %PROJECT system is in our gathering as a community to decide what our funding priorities should be &mdash;</p>
      <ul>
        <li>for sustainable agriculture and energy systems,</li>
        <li>for supporting local businesses, innovation, and local self-reliance,</li>
        <li>for ensuring everyone in our community has access to healthy food, a home, health care, cultural enrichment, and satisfying work</li>
      </ul>
      <p>&mdash; then issuing %RCREDITS to fund our decisions.</p>
      <p><b class="cos">Companies</b> and <b class="members">Members</b>. That community-level sovereignty requires <i>broad participation</i>. This growth chart shows how many we are today.</p>
      <p>%helpus</p>
      <p><b class="active">Active members</b> (red line) are the number who made a purchase in the past 30 days.</p>
X
    , compact('_helpus')) . $back;
  }
//      <p><b class="conx">Connections</b> ("conx") are the number of other members and participating businesses each active member has transacted with in the %PROJECT System.</p>

  if ($i == 'success-metrics') return w\chartFrame('success') . t(<<< X
    <ul>
    <li><b class="success">Success</b>. Our overall success measure is a weighted combination of the factors listed here.</li>
    <li><b class="active">Active</b>. An active account is one that has participated in a payment through %PROJECT in the past %RECENT_DAYS days.</li>
    <li><b class="gifts">Gifts</b>. Total donations to %PROJECT in the past 30 days, divided by 5.</li>
    <li><b class="payees">Payees</b>. Average number of different accounts paid by each active account in the past 30 days, multiplied by 50.</li>
    <li><b class="basket">Basket</b>. Average purchase size in the past %RECENT_DAYS days.</li>
    <li><b class="invites">Invites</b>. Total number of invitations sent by members in the past 30 days.</li>
    </ul>
X
  ) . $back;

  if ($i == 'dollar-pool') return w\chartFrame('funds') . t(<<< X
    <p>There are two kinds of funds in the %PROJECT system:</p>
    <ul>
      <li><b class="cgcredits">%RCREDITS</b>. This is the credit ("money") we issue together as a community, by agreeing to accept it as payment for our goods and services (or labor). We issue %RCREDITS in two ways: (1) in exchange for US Dollars AND (2) by allowing member accounts to have a negative balance. The orange area shows the total negative balances. The amount of %RCREDITS is exactly equal to the Dollar Pool amount (blue line) plus the amount of negative balances.</li>
      <li><p><b class="usd">US Dollars</b>. When you transfer funds from bank account to your %PROJECT Account, that money goes into the %PROJECT Community Fund Dollar Pool &mdash; a bank account owned by the community. You get an equal amount of %RCREDITS to use instead, to buy something from a participating business.</p>
      
      <p>The business can then use that %RCREDITS to pay its employees and suppliers, those suppliers pay their employees and suppliers, then all those employees become customers again and use that same %RCREDITS to buy things again from participating businesses. The credit goes around and around.</p>

      <p>Meanwhile, the Dollars you put in have <i>not</i> been used for purchases, so as participation grows the Dollar Pool accumulates more and more US Dollars, waiting to be used. From time to time when someone can't easily spend all their credits within the %PROJECT System, they trade some back in for US Dollars from the Dollar Pool. So the amount in the Dollar Pool goes up and down a little as it grows.</p>
      
      <p>Once we have enough active participation, we can decide together, as a community, how best to use the Dollar Pool funds &mdash; for strategic incentives, grants, zero-interest loans, and equity investments for sustainability and the common good.</p></li>
    </ul>

    <p>The chart also shows several measures to help you manage your community's %PROJECT economy without putting it in danger of a <%aCrunch>cash flow crunch</a>:</p>
    <ul>
      <li><b class="savings">Savings</b>. This line shows how much of the money in circulation is not actually being used each month for purchases. Money in use tends to stay in the system, whereas participants are more likely to cash out any extra money in their accounts beyond what they use regularly for purchases.</li>
      <li><b class="top3">Top 3(%)</b>. For accounts with the highest balance (the top 3 or top 3%, whichever is higher), those balances are totaled and shown as a red line. It is unlikely that 3% of the account-holders would decide all at once to spend (or cash out) their entire balance.</li>
      <li><b class="top3">Bottom 3(%)</b>. The accounts with the lowest balances are also shown with a red line. Encourage members to bring these balances up to zero or more, to increase the size of the community's Dollar Pool (blue line).</li>
      <li><b class="neg">Negative Balances</b>. The orange area shows the total of all negative balances. This is money borrowed by members and participating businesses, that would otherwise be in the Dollar Pool. Every time you spend money you don't have (resulting in a negative balance), you are <i>creating money</i>. As a community, we have a limit to how much money we can create. When your balance goes negative, we have that much less ability as a community to fund the common good. So the system encourages you to use your credit line only as a temporary convenience, bringing it back above zero as soon as possible.</li>
      <li><b class="limit">Credit Limits</b>. Each account has a credit line, equal to its average monthly activity over the past 6 months. For example, if your credit limit is $100, your account balance is allowed to go as low as negative $100 and no lower*. The pink line totals those credit limits for all accounts.</li>
    </ul>
    <p>* Your balance is not allowed to go below zero unless you choose that setting in your Preferences (on the Settings menu).</p>
X
  , '_aCrunch', atag('/help/cashflow')) . $back;
  
  if ($i == 'velocity' or $i == 'circulation-velocity') return w\chartFrame('velocity') . t(<<< X
    <p>In our society at large, how fast the money moves is an indicator of the health of our economy. Faster velocity implies more people spending more money per month.</p>
    <p>More spending is not necessarily a good thing, if we all already have what we need. But when there are unmet needs, increased economic activity can be a sign of things getting better. In the %PROJECT system, economic activity means people are finding the %PROJECT system useful, which is always a good thing.</p>
    <p>Notice that the faster money circulates, the less money we need, to buy the same stuff. Velocity is a money-stretcher! For example, suppose there are $1 million worth of %RCREDITS in circulation. Let's say the velocity is 1 in April (the whole million gets spent) and 2 in May (the whole million gets spent twice). In May we used the same amount of money to buy twice as much.</p>
    <p>For comparison, the velocity of M2 money stock in the United States over the past half century has fluctuated between .25 and .45 per month (as you can see on the chart, %RCREDITS circulation velocity is quite a bit higher).
    <p>The <b class="local">local</b> and <b class="inter">inter-community</b> rates are shown separately. When either rate is high, it reflects healthy trade (within the community or between %PROJECT Communities).</p>
    <p>The Dollar <b class="usd">exchange</b> velocity is also shown (blue line), to reflect opportunities for import-replacement &mdash; buying things within the %PROJECT System that currently are being bought elsewhere.</p>
X
  ) . $back;

  if ($i == 'economic-circles' or $i == 'transaction-volume') return w\chartFrame('volume') . t(<<< X
    <p>Economic circles are crucial to a healthy regional economy. The more we can keep money circulating locally, the richer we are. Why? Because we can use that money over and over &mdash; in effect turning each dollar into millions.</p>
    <p>In a typical economic circle, you buy something from a local store or pay for local services. That business then pays its local suppliers and its local employees. Those employees in turn become consumers like you &mdash; they buy something from a local store, etc. When at any point in this circle we lose the "local" and pay someone or some company outside our region, that money is gone. It has leaked out of our community and we are that much poorer.</p>
    <p>The %PROJECT system gives us an easy way to track our economic circles and opportunities for improvement.</p>
    <p>This chart shows four types of transactions. For strong economic circles, we should see the volume of person-to-business (<b class='p2b'>p2b</b>) transactions matching the volume of business-to-person (<b class='b2p'>b2p</b>) transactions. More <b class='p2b'>p2b</b> than <b class='b2p'>b2p</b> means business are not paying enough local employees (or other local businesses). More <b class='b2p'>b2p</b> than <b class='p2b'>p2b</b> means people are shopping elsewhere. As you see (in red), several member businesses have begun paying their employees in %RCREDITS (see our <%aFB>FaceBook post</a> on how we solved the payroll challenge).</p>
    <p>The <%aDemand>Monthly Bank Transfers</a> chart also measures how well we are doing as a community, at keeping money in the system.</p>
X
  , '_aFB _aDemand', atag('http://rc4.me/fb'), atag('/help/demand')) . $back;

  if ($i == 'your-return') return t(<<< X
    <p>Your effective return is calculated as your monthly inflation adjustment (currently based on %R_INFLATION_RATE% APR) plus any incentive rewards you got in the period, all divided by your average balance for the period. The result is then annualized to give you an APR (annual percentage rate). Regular financial institutions give you interest on your <em>minimum</em> balance for the month, which is nearly always lower than your <em>average</em> balance.</p>
X
  ) . $back;

  if ($i == 'social-return') return t(<<< X
    <p>The community's financial benefit from your participation is very loosely calculated as the sum of:</p>
    <ul>
      <li><b>Donations.</b> Your gifts to the %PROJECT project.</li>
      <li><b>Money in.</b> The amount of money you moved into the system, minus the amount you moved out (but not less than zero). By using %RCREDITS in place of those funds, as they circulate among %PROJECT members, we can free up that much US Dollars for the community to grant, lend, or invest.</li>
      <li><b>Rewards.</b> The amount of your incentive rewards for buying and selling (if your %PROJECT community offers incentive rewards) &mdash; reflecting the explicit value the community places on your using %RCREDITS for purchases and sales.</li>
      <li><b>Community funding.</b> Your per-capita share of the funds the community has already granted, loaned, or invested. The continued viability of that funding is supported by your participation. (counted as part of social benefits ever, but not in the past month)</li>
      <li><b>Card fees saved.</b> A percentage (%CC_RATE%) of your purchase and sale amounts &mdash; the typical processing fee that businesses pay for credit card purchases. Together with the other party to the transaction, you kept that much money from leaking out of the community to the big banks.</li>
    </ul>
    </p>
    <p><b>Control.</b> Of course your participation benefits the community far beyond mere money. The commmunity benefits by all of us together having greater control over our local economy, so we can plan and decide together how to use the power of money to make a better life for everyone.</p>
X
  ) . $back;
  
  if ($i == 'taxes') {
    $taxhead = ray('Tax Form:;1120;990;990EZ;990-A;1040;1040A;1040 Sched C');
    $taxline[] = ray('Sales / Other Income,1a,varies,varies,varies,7 or 21 ("barter"),7,1');
    $taxline[] = ray('Inflation Adjustment,5 or 10,VIII(3)D,I(4),II(B)8,8a or 21,7 or 8a,6');
    $taxline[] = ray('Incentive Rewards,10,VIII(3)D,I(4),II(B)8,21,7,6');
    $taxline[] = ray('"Sharing" Donations,19,IX(1),I(10),N/A,,Subtract from Rewards,4; 8; 10; 17; or 27a');
    $taxes = '<tr><th class="cat">' . join('</th><th>', $taxhead) . "</th></tr>\n";
    foreach ($taxline as $line) $taxes .= '<tr><td class="cat">' . join('</td><td>', $line) . "</td></tr>\n";
    $taxes = strtr($taxes, ['<td></td><td>' => '<td colspan="2">', ';' => ',']);
    
    return t(<<< X
  <p>Pay taxes on %PROJECT income just as you would for US Dollar income, including income, excise, and sales taxes.</p>

  <p>If you follow the <%a1>accounting practices recommended</a> by %PROJECT staff, your software already includes your %PROJECT income, properly categorized, in your accounting records and reports.</p>

      <table id="taxes">
$taxes
      </table>
X
    , '_a1', atag('http://rc4.me/doc/accounting.pdf'));
  }
  
  if ($i == 'bits') {
    include_once __DIR__ . '/bit-descs.inc';
    foreach ($flagHelp as $k => $v) $res[] = "<tr><td>$k</td><td>$v</td></tr>";
    $res = join("\n", $res);
    return t(<<< X
      <div id="bit-help">
      <p>Community Administrators can see and set/unset most of these bits on each account's Dashboard page.</p>
      <table>$res</table>
      </div bit-help>
X
    );
  }
  
  
  if ($i == 'risks') {
    include_once __DIR__ . '/risk-descs.inc';
    extract($riskHelp, EXTR_PREFIX_ALL, 'h');
    $acctRisks = $txRisks = $_special = '';
    foreach (ray(K_ACCT_RISKS) as $k => $weight) {
      $extra = '';
      if ($k == 'trusted') $extra = t('This risk factor is multiplied by the number of other accounts that trust this member. Being chosen as an alternate proxy counts as half. Likewise being chosen as someone\'s proxy\'s proxy counts as half.');
      if ($k == 'badConx') $extra = t('This risk factor is multiplied by the number of such connections.');
      if ($k == 'geography') $extra = t('Federal and state law enforcement agencies have identified 28 High Intensity Drug Trafficking Areas (HIDTAs), which include 16 percent of all counties in the United States and 60 percent of the U.S. population. For example, Washtenaw County, Michigan has been designated as part of the Michigan HIDTA. Unfortunately, since such a high proportion of the U.S. population lives in these areas, the risk weight here is very low, for practical reasons.');
      if ($k == 'new') $extra = t('This risk factor is divided by the number of years the member (individual or company) has been at its current address.');
      if ($k == 'moves') $extra = t('This risk factor is multiplied by the number of times the member has moved, over the past decade (if known)');
      if ($k == 'bigDay') $extra = t('For individual accounts, the number of "employees" is 1.');
      if (in($k, 'bigWeek big7Week bigYear')) $extra = t('(see bigDay)');
      $acctRisks .= ($line = riskHelpLine($k, $weight, $extra, $tag));
      if ($tag == $k) $_special = $line;
    }
    foreach (ray(K_TX_RISKS) as $k => $weight) {
      $extra = '';
      if ($k == 'origins') $extra = t('This risk factor is multiplied by the average risk of the payer\'s receiving transactions over the past year.');
      if (in($k, 'fromSuspect toSuspect suspectOut suspectIn')) $extra = t('This risk factor is multiplied by the suspicious account risk, divided by the "unusually large" threshold: $%K_THRESHOLD.');
      if ($k == 'invoiceless') $extra = t('And no mention of an invoice in the transaction description.');
      $txRisks .= ($line = riskHelpLine($k, $weight, $extra, $tag));
      if ($tag == $k) $_special = $line;
    }

    $acctRisks = t('<h2>Account Flags</h2>') . "\n<table>$acctRisks</table>\n";
    $txRisks = t('<h2>Transaction and ACH Flags</h2>') . "\n<table>$txRisks</table>\n";
    $_score = number_format(K_RED*300*8/15/K_THRESHOLD, 0);
    $_score = "<span class=\"badRisk\">$_score</span>";
//    if ($_special) $_special = preg_replace('/^(.*)\[(.*)\](.*)/', '<div id="special-flag"><big style="color:red;">$1</big> (weight:$2) $3</div>', $_special);
    return t(<<< X
      <div id="risk-help">
      <table id="special-flag">%special</table>
      <p>Suspicious Activity Risk Scores (flags) are calculated based on a weight divisor assigned to each type of risk. That divisor (shown in square brackets for each item below) is an assessment of how many same-sized risks would together make an account or transaction suspicious -- a higher divisor means less risk. <span class="goodRisk">Risk factors with a negative divisor</span> (shown in green) are mitigating.</p>
      <p>Risk scores are then proportional to the sum of the inverses of those weight divisors - a higher score means more risk. For transactions, the score is further multiplied by the transaction amount and divided by the "unusually large" threshold, set VERY conservatively to $%K_THRESHOLD. All risk scores are finally multiplied by %K_RED and rounded to the nearest integer. So %K_RED is the minimum "suspicious" score.</p>
      <p>For example, a $300 transaction with two risk factors having weight divisors of 3 and 5 respectively, would be scored as FLOOR ( (â…“ + â…•) * (300 / %K_THRESHOLD) * 100 ) = %score (asterisk here means multiply, slash means divide).</p>
X
    , compact('_score', '_special')) . $acctRisks . $txRisks . '</div risk-help>';
  }
}

function riskHelpLine($k, $weight, $extra = '', $tag) {
  global $riskHelp;
  if (!nn($riskHelp) or !$basic = u\uc1(nni($riskHelp, $k))) return '';
//  $class = $tag == $k ? 'tagged' : ($weight < 0 ? 'goodRisk' : 'badRisk');
  $class = $weight < 0 ? 'goodRisk' : 'badRisk';
  return "<tr><td class=\"$class\">$k</td><td class=\"weight\">[$weight]</td><td>$basic. $extra</td></tr>\n";
}
